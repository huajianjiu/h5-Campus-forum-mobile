(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4eb08643"],{"7abe":function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"index-container"},[n("van-sticky",[n("van-search",{staticStyle:{height:"54px"},attrs:{"show-action":"",placeholder:"请输入搜索关键词"},on:{focus:t.toSearch},scopedSlots:t._u([{key:"action",fn:function(){return[n("van-popover",{attrs:{trigger:"click",placement:"bottom-end",actions:t.actions},on:{select:t.toEditTopic},scopedSlots:t._u([{key:"reference",fn:function(){return[n("van-button",{staticStyle:{"margin-bottom":"3px"},attrs:{size:"small",icon:"edit",round:"",color:"#7558fe"}},[t._v("发布")])]},proxy:!0}]),model:{value:t.showPopover,callback:function(e){t.showPopover=e},expression:"showPopover"}})]},proxy:!0}])})],1),n("van-tabs",{attrs:{"offset-top":"54",sticky:"",color:"#7558fe",swipeable:"",animated:""},on:{change:t.changeTab},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[t.network?n("van-empty",{staticStyle:{margin:"0 auto"},attrs:{image:"network","image-size":"375",description:"网络连接失败，请检查网络"}}):t._e(),t._l(t.sectionList,(function(e){return n("van-tab",{key:e.sID,attrs:{name:e.sID,title:e.sName}},[n("van-pull-refresh",{staticStyle:{"min-height":"80vh"},on:{refresh:function(n){return t.onRefresh(e.sID)}},model:{value:t.refreshing,callback:function(e){t.refreshing=e},expression:"refreshing"}},[""==!t.announcement?n("van-notice-bar",{attrs:{"left-icon":"volume-o",text:t.announcement.aTitle+"  "+t.announcement.aContents},on:{click:t.toAnnouncement}}):t._e(),n("van-list",{staticStyle:{"margin-top":"10px"},attrs:{finished:t.finished,"finished-text":"没有更多了","error-text":"请求失败，点击重新加载"},on:{load:function(n){return t.onLoad(e.sID)}},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.list,(function(t){return n("TopicCell",{key:t.tID,attrs:{topic:t}})})),1)],1)],1)}))],2)],1)},i=[],a=n("d0ff"),r=(n("96cf"),n("c964")),s=n("f3f3"),c=n("2f62"),u={data:function(){return{sectionList:[],active:0,list:[],error:!1,loading:!1,finished:!1,refreshing:!1,page:1,limit:5,total:0,showPopover:!1,actions:[{text:"发帖",icon:"add-o"}],announcement:"",network:!1}},mounted:function(){this.getSectionList(),this.getAnnouncement()},computed:Object(s["a"])({},Object(c["b"])(["userInfo"])),methods:{getSectionList:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$API.home.reqSectionList();case 3:n=e.sent,200==n.code&&(t.sectionList=n.data),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),t.network=!0;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()},getAnnouncement:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$API.home.reqAnnouncement();case 2:n=e.sent,200==n.code&&(t.announcement=n.data);case 4:case"end":return e.stop()}}),e)})))()},toSearch:function(){this.$router.push("/search")},getList:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){var o,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.$API.home.reqTopicList({page:e.page,limit:e.limit,sID:t,uID:""});case 2:i=n.sent,e.refreshing=!1,0===i.data.length&&(e.list=[],e.finished=!0),e.total=i.data.count,(o=e.list).push.apply(o,Object(a["a"])(i.data.rows)),e.loading=!1,e.list.length>=i.data.count&&(e.finished=!0);case 9:case"end":return n.stop()}}),n)})))()},onLoad:function(t){this.getList(t),this.page++},onRefresh:function(t){this.finished=!1,this.loading=!0,this.page=1,this.list=[],this.onLoad(t)},toEditTopic:function(){var t=this;this.userInfo.uID?this.$router.push({name:"EditTopic",params:{sectionList:this.sectionList}}):this.$dialog.confirm({confirmButtonText:"去登录",message:"必须先登录才能访问该部分内容"}).then((function(){t.$router.push("/edittopic")})).catch((function(){}))},changeTab:function(t){this.loading=!0,this.onRefresh(t)},toAnnouncement:function(){this.$router.push({name:"Announcement",params:{announcement:this.announcement}})}}},l=u,h=(n("efea"),n("2877")),f=Object(h["a"])(l,o,i,!1,null,"3dcd496a",null);e["default"]=f.exports},da07:function(t,e,n){},efea:function(t,e,n){"use strict";var o=n("da07"),i=n.n(o);i.a}}]);