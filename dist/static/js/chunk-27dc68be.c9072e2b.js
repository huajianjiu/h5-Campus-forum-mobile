(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-27dc68be"],{"1c45":function(e,t,a){"use strict";var r=a("3e9b"),n=a.n(r);n.a},"3e9b":function(e,t,a){},"555a":function(e,t,a){e.exports=a.p+"static/img/icon.844129a2.png"},b381:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{height:"100vh","background-color":"#fff"}},[a("van-nav-bar",{attrs:{fixed:"",placeholder:"",title:"用户注册","left-arrow":""},on:{"click-left":function(t){return e.$router.go(-1)}}}),e._m(0),a("van-cell-group",{attrs:{inset:"",border:!1}},[a("van-form",{on:{submit:e.onSubmit}},[a("van-field",{attrs:{name:"username",label:"用户名",placeholder:"填写手机号",rules:[{required:!0,message:"请输入账号"},{pattern:e.pattern,message:"请输入正确手机号"},{validator:e.asyncValidator,message:"账号已注册，请直接登录"}]},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),a("van-field",{attrs:{type:"password",name:"password",label:"密码",placeholder:"密码",rules:[{required:!0,message:"请设置密码"},{pattern:e.patternPwd,message:"以字母开头，长度在6~18之间，只能包含字母、数字和下划线"}]},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),a("van-field",{attrs:{type:"password",name:"password1",label:"确认密码",placeholder:"请确认密码",rules:[{validator:e.validator,message:"两次密码不一致"}]},model:{value:e.password1,callback:function(t){e.password1=t},expression:"password1"}}),a("div",{staticStyle:{margin:"20px"}},[a("van-button",{attrs:{round:"",block:"",type:"info","native-type":"submit"}},[e._v("注册")])],1)],1)],1)],1)},n=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"middle"},[r("div",[r("img",{attrs:{width:"50px",height:"50px",src:a("555a"),alt:""}})]),r("span",{staticClass:"name"},[e._v("校园论坛注册")])])}],s=(a("ac1f"),a("5319"),a("96cf"),a("c964")),o={name:"Register",data:function(){return{username:"",password:"",password1:"",pattern:/^((\+|00)86)?1((3[\d])|(4[5,6,7,9])|(5[0-3,5-9])|(6[5-7])|(7[0-8])|(8[\d])|(9[1,8,9]))\d{8}$/,patternPwd:/^[a-zA-Z]\w{5,17}$/}},methods:{validator:function(e){return this.password==e},asyncValidator:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$API.user.reqvalidator({username:e.username});case 2:if(a=t.sent,200!=a.code){t.next=7;break}return t.abrupt("return",!0);case 7:return t.abrupt("return",!1);case 8:case"end":return t.stop()}}),t)})))()},onSubmit:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,t.$toast.loading({message:"注册中...",forbidClick:!0,loadingType:"spinner",duration:t.toastShow}),a.next=4,t.$store.dispatch("user/register",e);case 4:t.toastShow=1,t.$router.replace("/editinfo"),a.next=12;break;case 8:a.prev=8,a.t0=a["catch"](0),t.toastShow=1,t.$toast.fail({message:a.t0.message});case 12:case"end":return a.stop()}}),a,null,[[0,8]])})))()}}},i=o,c=(a("1c45"),a("2877")),u=Object(c["a"])(i,r,n,!1,null,"6ebaf645",null);t["default"]=u.exports}}]);